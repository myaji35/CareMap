# CareMap 화면별 개발 단계 점검표

> 개발 서버: http://localhost:3004

## 📊 전체 진행 상황

| 화면 | 경로 | UI 완성도 | 기능 구현 | DB 연동 | 우선순위 |
|------|------|-----------|----------|---------|----------|
| 로그인 | `/login` | ✅ 100% | ✅ 90% | ⚠️ 0% | 🔴 HIGH |
| 회원가입 | `/register` | ✅ 100% | ✅ 90% | ⚠️ 0% | 🔴 HIGH |
| 메인(지도) | `/` | ✅ 80% | ⚠️ 50% | ❌ 0% | 🔴 HIGH |
| 크롤러 관리 | `/crawler` | ✅ 90% | ⚠️ 30% | ❌ 0% | 🟡 MED |
| 기관 상세 | `/institutions/[id]` | ❌ 0% | ❌ 0% | ❌ 0% | 🟡 MED |
| 검색/필터 | (미구현) | ❌ 0% | ❌ 0% | ❌ 0% | 🟢 LOW |

---

## 1️⃣ 로그인 페이지 (`/login`)

### ✅ 완료된 항목
- [x] 반응형 UI 디자인 (그라디언트 배경, 카드 레이아웃)
- [x] 아이디/비밀번호 입력 필드
- [x] NextAuth credentials 로그인 연동
- [x] 에러 메시지 표시
- [x] 로딩 상태 (버튼 비활성화)
- [x] 회원가입 페이지 이동 링크
- [x] 테스트 계정 정보 표시
- [x] Form validation (required)

### ⚠️ 개선 필요 항목
- [ ] **PostgreSQL 데이터베이스 연결** (현재 가장 중요!)
- [ ] 로그인 실패 시 더 구체적인 에러 메시지
- [ ] "비밀번호 찾기" 기능
- [ ] "자동 로그인" 옵션
- [ ] 모바일 최적화 테스트

### 🐛 알려진 이슈
- 데이터베이스 미설정 시 로그인 불가 (Prisma connection error)

### 🎨 UI 스크린샷 체크리스트
- [ ] 데스크톱 (1920x1080)
- [ ] 태블릿 (768x1024)
- [ ] 모바일 (375x667)
- [ ] 다크모드 지원 (선택)

---

## 2️⃣ 회원가입 페이지 (`/register`)

### ✅ 완료된 항목
- [x] 회원가입 폼 UI (아이디, 이메일, 비밀번호, 비밀번호 확인)
- [x] 선택 입력 필드 (전화번호, 소속 기관)
- [x] `/api/auth/register` API 연동
- [x] 비밀번호 일치 검증
- [x] 자동 로그인 (회원가입 후)
- [x] 에러 처리 및 메시지 표시
- [x] 로그인 페이지 이동 링크

### ⚠️ 개선 필요 항목
- [ ] **PostgreSQL 데이터베이스 연결**
- [ ] 비밀번호 강도 표시 (약함/보통/강함)
- [ ] 이메일 중복 확인 (실시간)
- [ ] 아이디 중복 확인 (실시간)
- [ ] 약관 동의 체크박스
- [ ] 이메일 인증 (선택)

### 🐛 알려진 이슈
- 데이터베이스 미설정 시 회원가입 불가

### 📝 추가 기능 아이디어
- [ ] 사용자 유형 선택 (일반/기관 관리자)
- [ ] 기관 검색 및 선택 (소속 기관)
- [ ] 프로필 이미지 업로드

---

## 3️⃣ 메인 페이지 - 지도 (`/`)

### ✅ 완료된 항목
- [x] 상단 헤더 (CareMap 로고, 사용자 정보)
- [x] 로그인/로그아웃 버튼
- [x] 관리자 전용 "데이터 크롤링" 버튼
- [x] Kakao Maps SDK 연동
- [x] Mock 데이터 기반 마커 표시
- [x] 파이차트 마커 (입소율 색상 구분)
- [x] 마커 호버 시 정보 카드

### ⚠️ 개선 필요 항목
- [ ] **실제 데이터베이스 연동** (Mock 데이터 → DB 조회)
- [ ] 검색바 추가 (기관명, 주소 검색)
- [ ] 필터링 옵션 (서비스 유형, 입소율, 지역)
- [ ] 현재 위치 버튼
- [ ] 지도 확대/축소 컨트롤
- [ ] 마커 클릭 시 상세 페이지 이동
- [ ] 로딩 스피너 (지도 로드 중)
- [ ] 빈 상태 메시지 (데이터 없을 때)

### 🐛 알려진 이슈
- 현재 Mock 데이터만 표시 (6개 샘플 기관)
- 마커 클릭 이벤트 미구현

### 🎯 우선순위 기능
1. **DB에서 실제 기관 데이터 가져오기**
2. 검색/필터 UI 추가
3. 마커 클릭 → 상세 페이지 이동

---

## 4️⃣ 크롤러 관리 페이지 (`/crawler`)

### ✅ 완료된 항목
- [x] 관리자 권한 체크
- [x] 통계 카드 (총 처리, 성공, 업데이트, 실패)
- [x] 로그 출력 영역
- [x] "크롤링 시작" 버튼
- [x] 로그 색상 구분 (info/success/error/warning)

### ⚠️ 개선 필요 항목
- [ ] **실제 크롤러 API 연동** (`/api/crawler/start`)
- [ ] 실시간 로그 업데이트 (WebSocket or SSE)
- [ ] 크롤링 중단 버튼
- [ ] 크롤링 스케줄 설정 (cron)
- [ ] 크롤링 히스토리 조회
- [ ] 크롤링 진행률 표시 (프로그레스 바)

### 🐛 알려진 이슈
- 현재 Mock 로그만 표시
- 실제 Python 크롤러와 미연동

### 📝 추가 기능 아이디어
- [ ] 크롤링 대상 URL 관리
- [ ] 에러 로그 다운로드
- [ ] 크롤링 성능 차트

---

## 5️⃣ 기관 상세 페이지 (`/institutions/[id]`) ⚠️ 미구현

### 📋 구현 예정 항목
- [ ] 기관 기본 정보 (이름, 주소, 전화번호, 운영시간)
- [ ] 입소율 게이지 차트
- [ ] 월별 입소율 변화 그래프 (Recharts)
- [ ] Kakao 지도 (단일 마커)
- [ ] 이력 테이블 (변경 날짜, 정원, 현원)
- [ ] "목록으로" 버튼
- [ ] 관리자 전용: 수정/삭제 버튼

### 🎨 UI 레이아웃 (예상)
```
┌─────────────────────────────────────┐
│ [← 목록으로]              [수정] [삭제] │
├─────────────────────────────────────┤
│ 기관명: 서울 행복요양원              │
│ 주소: 서울특별시 강남구...          │
│ 입소율: 84% [═══════░░░]            │
├─────────────────────────────────────┤
│ [지도]                              │
├─────────────────────────────────────┤
│ 월별 입소율 추이 [차트]             │
├─────────────────────────────────────┤
│ 변경 이력                           │
│ 2024-01  정원: 50  현원: 42         │
│ 2023-12  정원: 50  현원: 40         │
└─────────────────────────────────────┘
```

---

## 6️⃣ 검색/필터 기능 ⚠️ 미구현

### 📋 구현 예정 항목
- [ ] 검색바 컴포넌트 (메인 페이지 상단)
- [ ] 필터 사이드바 또는 드롭다운
  - [ ] 서비스 유형 (노인요양시설, 주야간보호 등)
  - [ ] 입소율 범위 (0-70%, 70-90%, 90-100%)
  - [ ] 지역 선택 (시/도, 시/군/구)
- [ ] 검색 결과 개수 표시
- [ ] 검색어 하이라이트
- [ ] 최근 검색어 저장

---

## 🚀 우선순위별 작업 계획

### 🔴 Phase 1: 데이터베이스 연동 (필수)
**목표:** 실제 데이터로 애플리케이션 동작 가능하게 만들기

1. **PostgreSQL 데이터베이스 설정**
   ```bash
   # Neon, Supabase, Railway 중 선택
   # .env.local에 DATABASE_URL 설정
   ```

2. **Prisma 마이그레이션 실행**
   ```bash
   npm run db:generate
   npm run db:migrate
   ```

3. **초기 데이터 생성**
   ```bash
   npm run db:seed  # Admin 계정 + 샘플 기관 데이터
   ```

4. **메인 페이지 DB 연동**
   - Mock 데이터 대신 `/api/institutions` 호출
   - Server Component로 데이터 fetching

5. **로그인/회원가입 테스트**
   - Admin 계정으로 로그인
   - 새 계정 생성 테스트

**예상 소요 시간:** 2-3시간

---

### 🟡 Phase 2: 핵심 기능 구현
**목표:** 사용자가 실제로 사용할 수 있는 MVP 완성

1. **기관 상세 페이지 구현**
   - [ ] 페이지 생성 (`app/institutions/[id]/page.tsx`)
   - [ ] API 연동 (`/api/institutions/[id]`)
   - [ ] UI 구현 (정보 카드, 차트, 지도)

2. **검색/필터 기능 추가**
   - [ ] 검색바 컴포넌트
   - [ ] API 쿼리 파라미터 처리
   - [ ] 필터 UI

3. **크롤러 API 연동**
   - [ ] `/api/crawler/start` 구현
   - [ ] Python 크롤러 호출
   - [ ] 로그 스트리밍 (SSE)

**예상 소요 시간:** 1-2일

---

### 🟢 Phase 3: UX 개선 및 최적화
**목표:** 사용자 경험 향상 및 안정성 확보

1. **로딩 상태 개선**
   - [ ] 스켈레톤 UI
   - [ ] 로딩 스피너
   - [ ] 에러 바운더리

2. **반응형 디자인 개선**
   - [ ] 모바일 테스트 및 수정
   - [ ] 태블릿 최적화

3. **성능 최적화**
   - [ ] 이미지 최적화
   - [ ] API 캐싱
   - [ ] 지도 마커 클러스터링

**예상 소요 시간:** 2-3일

---

## 📝 테스트 체크리스트

### 기능 테스트
- [ ] 회원가입 → 자동 로그인 → 메인 페이지
- [ ] 로그아웃 → 로그인 페이지 → 재로그인
- [ ] 관리자로 로그인 → 크롤러 페이지 접근
- [ ] 일반 사용자로 로그인 → 크롤러 페이지 차단
- [ ] 지도 마커 클릭 → 상세 페이지 이동
- [ ] 검색 → 결과 표시 → 마커 업데이트
- [ ] 크롤링 시작 → 로그 확인 → 데이터 업데이트

### UI/UX 테스트
- [ ] 모든 페이지 로딩 시간 < 2초
- [ ] 모바일에서 터치 동작 정상
- [ ] 에러 발생 시 친절한 메시지 표시
- [ ] 빈 상태 UI 확인
- [ ] 로딩 상태 UI 확인

### 브라우저 호환성
- [ ] Chrome (최신)
- [ ] Safari (최신)
- [ ] Firefox (최신)
- [ ] Edge (최신)

---

## 🎯 다음 작업

### 지금 당장 해야 할 것 (CRITICAL)
1. **PostgreSQL 데이터베이스 설정**
   - Neon, Supabase, Railway 중 선택
   - `.env.local` 업데이트
   - `npm run db:migrate` 실행

2. **초기 데이터 생성**
   - Admin 계정 생성
   - 샘플 기관 5-10개 추가

3. **메인 페이지 DB 연동**
   - Mock 데이터 제거
   - 실제 API 호출로 변경

### 다음 주 목표
1. 기관 상세 페이지 완성
2. 검색/필터 기능 구현
3. 크롤러 API 연동

---

## 📞 질문 및 결정 사항

### 결정이 필요한 항목
- [ ] PostgreSQL 호스팅: Neon vs Supabase vs Railway?
- [ ] 크롤러 실행 방식: 버튼 클릭 vs 자동 스케줄?
- [ ] 사용자 유형: 2단계(Admin/User) vs 3단계(Admin/Manager/User)?
- [ ] 이메일 인증: 필요 vs 불필요?

### 현재 미정 항목
- [ ] 데이터 업데이트 주기 (일일? 주간?)
- [ ] 최대 표시 기관 수 (성능 고려)
- [ ] 지도 초기 중심 좌표 (서울? 사용자 위치?)

---

## 🔗 참고 링크

- [Prisma 문서](https://www.prisma.io/docs)
- [NextAuth 문서](https://next-auth.js.org)
- [Kakao Maps SDK](https://apis.map.kakao.com/web/)
- [Tailwind CSS](https://tailwindcss.com/docs)

---

**마지막 업데이트:** 2025-10-21
**다음 리뷰 예정:** 데이터베이스 연동 완료 후
